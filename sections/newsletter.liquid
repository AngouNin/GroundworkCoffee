{%- comment -%}
  This is a required section for the Shopify Theme Store.
  It is available when you add "Newsletter" section on the Theme Editor.

  Theme Store required settings
  - Heading: title of the newsletter section
  - Subheading: description of the newsletter section
{%- endcomment -%}
  <div id="shopify-section-newsletter">

<section class="newsletter">
  <div class="container">
    <div class="d-flex columns">
      <div class="w-50">

      </div>
      <div class="w-50">
        {% if section.settings.section_title != blank %}
          <h2 class="newsletter--title">{{ section.settings.section_title | escape }}</h2>
        {% endif %}
        {% if section.settings.subheading != blank %}
          <div class="newsletter--desc">
            <p>{{ section.settings.subheading | escape }}</p>
          </div>
        {% endif %}
        <div class="newsletter-signup">
    
          <form id="klaviyo_newsletter" class="klaviyo_gdpr_embed_{{ section.settings.list_id }}" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
            <input type="hidden" name="g" value="{{ section.settings.list_id }}">
            <input type="hidden" name="$fields" value="phone_number">
            <input type="hidden" name="$list_fields" value="$consent">
            <input type="hidden" name="$consent" value="email">
           
            <div class="form-actual">
              <div class="">
                <div class="input-container">
                  <label for="k_id_f_name_newsletter" class="label-hidden">
                    First Name
                  </label>
                  <input type="text" value="" name="f_name" id="k_id_f_name_newsletter" placeholder="First Name" />
                  
                  <label for="k_id_l_name_newsletter" class="label-hidden">
                    Last Name
                  </label>
                  <input type="text" value="" name="l_name" id="k_id_l_name_newsletter" placeholder="Last Name" />
                </div>
                <div class="input-container">
                  <label for="k_id_email_newsletter" class="label-hidden">
                    Email
                  </label>
                  <input type="email" value="" name="email" id="k_id_email_newsletter" placeholder="Email Address" />
                </div>
                <div class="input-container d-flex">
                  <label for="k_id_phone_newsletter" class="label-hidden">
                    Phone
                  </label>
                  <input type="tel" value="" name="phone_number" id="k_id_phone_newsletter" placeholder="Phone Number" />
                
                  <div class="">
                    <button type="submit" class="" aria-label="Newsletter Submit">
                      {% include "icon-flower-black" %}
                    </button>
                  </div>
                </div>
              </div>

             

            </div>
            <div class="klaviyo_messages">
              <div class="success_message alert alert-success" style="display:none;"></div>
              <div class="error_message alert alert-danger" style="display:none;"></div>
            </div>
          </form>
          <script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
          <script type="text/javascript">
            KlaviyoSubscribe.attachToForms('#klaviyo_newsletter', {
              hide_form_on_success: true,
              success_message: '{{ section.settings.success | escape }}',
              extra_fields: ['$phone_number'],
              success: function($form) {
                $('#klaviyo_newsletter .form-actual').hide();
              }
            });
          </script>
        </div>



      </div>
    </div>
  </div>
  <div class="lazyload bg-image" data-bgset="{% include 'responsive-bg-image', image: section.settings.image %}" alt="News Letter"></div>

</section>

</div>

{% schema %}
  {
    "name": "Newsletter",
    "settings": [
      {
        "type": "text",
        "id": "section_title",
        "label": "Title",
        "default": "Subscribe to our newsletter"
      },
      {
        "type": "text",
        "id": "subheading",
        "label": "Subheading",
        "default": "A short sentence describing what someone will receive by subscribing"
      },
      {
        "type": "paragraph",
        "content": "Any customers who sign up will have an account created for them in Shopify. [View customers](/admin/customers?query=&accepts_marketing=1)"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "text",
        "id": "list_id",
        "label": "List ID",
        "info": "[Find your list ID](https://help.klaviyo.com/hc/en-us/articles/115005078647-Find-a-List-ID)"
      },
      {
        "type": "textarea",
        "id": "success",
        "label": "Success message",
        "default": "Thank you for subscribing! Check your email for a confirmation message."
      }
    ]
  }
{% endschema %}
